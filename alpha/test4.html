<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Document</title>
  <link rel="stylesheet" href="style/style.css">
  <script type="text/javascript" src="js/jquery.min.js"></script>
  <script src="dance.js"></script>
  <script type="text/javascript" src="js/Detector.js"></script>
    <!-- // <script type="text/javascript" src="js/jquery.min.js"></script> -->
    <!-- // <script type="text/javascript" src="js/three.min.js"></script> -->
    <!-- // <script src="//cdnjs.cloudflare.com/ajax/libs/three.js/r69/three.js"></script> -->
    <script src="
https://cdnjs.cloudflare.com/ajax/libs/three.js/r73/three.js"></script>
    <script type="text/javascript" src="js/leap.min.js"></script>
    <!-- // <script type="text/javascript" src="js/leap.min.js"></script> -->
    
    <!-- // <script src="//js.leapmotion.com/leap-plugins-0.1.11.js"></script> -->
    <script type="text/javascript" src="js/LeapCameraControls.js"></script>
    <script type="text/javascript" src="js/leap-plugins-0.1.11.js"></script>

    <script type="text/javascript" src="js/LeapObjectControls.js"></script>
    <script src="js/OrbitControls.js"></script>
    <script src="js/leap.rigged-hand-0.1.7.js"></script>
    <script src="js/tween.js"></script>
    <script src="js/stats.js"></script>



  <!-- // <script src="//js.leapmotion.com/leap-0.6.4.js"></script> -->

   <!-- <script src="//js.leapmotion.com/leap-0.4.3.js"></script>
  // <script src="js/leap-plugins-0.1.11pre.js"></script>

  // <script src="js/leap-widgets-0.1.0.js"></script> -->

</head>
<body>
  <div id="target" style="position:absolute; top: 100px; left: 100px; width: 100px; height: 100px; background: #a0dde9; padding: 1em;">
      hello world!
    </div>
  
</body>

<script>



// function init() {
      var projector;
      var objects = [], objectsControls = [], cameraControls;
      var coords1, coords2, coords3;
      var lastControlsIndex = -1, controlsIndex = -1, index = -1;
      var position;
      var target;
      var tween, tweenBack;

      var renderer = new THREE.WebGLRenderer();
    renderer.setSize( 3000, 3000 );
    document.body.appendChild( renderer.domElement );

     var scene = new THREE.Scene();

       camera = new THREE.PerspectiveCamera(
        100,         // Field of view
        1000/1000,  // Aspect ratio
        1,        // Near
        1000       // Far
    );
    // renderer.setSize(10000,10000)
    camera.position.set( -15, 10, 10 );
    camera.lookAt( scene.position );

//     var geometry = new THREE.Geometry();

    var boxSize = 40;

    var geometryCude1 = new THREE.BoxGeometry( boxSize, boxSize, boxSize );
    var materialCude1 = new THREE.MeshBasicMaterial( {color: 0x000000} );
    var cube1 = new THREE.Mesh( geometryCude1, materialCude1 );
    // cube1.position.set(1, 1, 1);
    cube1.name = 'cube1';

    var geometryCude2 = new THREE.BoxGeometry( boxSize, boxSize, boxSize );
    var materialCude2 = new THREE.MeshBasicMaterial( {color: 0xFF0000 } );
    var cube2 = new THREE.Mesh( geometryCude2, materialCude2 );
    cube2.name = 'cube2';

    var geometryCude3 = new THREE.BoxGeometry( boxSize, boxSize, boxSize );
    var materialCude3 = new THREE.MeshBasicMaterial( {color: 0x33FF00 } );
    var cube3 = new THREE.Mesh( geometryCude3, materialCude3 );
    cube1.position.set(boxSize, boxSize, boxSize);
    cube3.name = 'cube3';

    

    // scene.add(cube2);

    var light = new THREE.PointLight( 0xFFFF00 );
    light.position.set( 10, 0, 10 );
    scene.add( light );

      renderer.setClearColor( 0xFFFFFF, 1);
      renderer.render( scene, camera );

      tile();
      animate();

function tile() {
    position = {x: 100, y: 100, rotation: 0};
    target = document.getElementById('target');
    // tween = new TWEEN.Tween(position)
    //   .to({x: 700, y: 200, rotation: 359}, 2000)
    //   .delay(100)
    //   .easing(TWEEN.Easing.Elastic.InOut)
    //   .onUpdate(update);
      tween = new TWEEN.Tween(position)
      .to({x: 700, y: 200, rotation: 359}, 800)
      .delay(1000)
      // .easing(TWEEN.Easing.Elastic.InOut)
      .onUpdate(update);

      // tweenBack = new TWEEN.Tween(position)
      //     .to({x: 100, y: 100, rotation: 0}, 3000)
      //     .easing(TWEEN.Easing.Elastic.InOut)
      //     .onUpdate(update);
      //   tween.chain(tweenBack);
      //   tweenBack.chain(tween);
        tween.start();
}

      

        function animate( time ) {
        requestAnimationFrame( animate );
        TWEEN.update( time );
      }

      function update() {
        target.style.left = position.x + 'px';
        target.style.top = position.y + 'px';
        // target.style.webkitTransform = 'rotate(' + Math.floor(position.rotation) + 'deg)';
        // target.style.MozTransform = 'rotate(' + Math.floor(position.rotation) + 'deg)';
      }


  //   var dancer = new Dancer();
  //   var boost = 0;
  // // Using an audio object
  var a = new Audio();
  a.src = 'test.mp3';
  // dancer.load( a );
  // dancer.play()

  // temp = dancer.getWaveform()
  // dancer.createKick([0,10]);
  // function getData() {
  // for (var i = 0; i < temp.length; i++) {
  //               boost += temp[i];
  //               // console.log(array[i])
  //           }
  // console.log(boost)
  // }

    // To enable flash fallback, specify the paths for the flashSWF and flashJS
  // Dancer.setOptions({
  //   flashJS  : '../../lib/soundmanager2.js',
  //   flashSWF : '../../lib/soundmanager2.swf'
  // 
 


  var
    // audio  = document.getElementsByTagName('audio')[0],
    dancer = new Dancer(),
    kickLow = dancer.createKick({
      threshold: .1,
      onKick: function ( mag ) {
        // console.log('Kick low');
        scene.add(cube1);
        

      },
      offKick: function ( mag ) {
        // console.log('no kick low');
          scene.remove(cube1);
      }
    }),
    kickHigh = dancer.createKick({
      threshold: .5,
      onKick: function ( mag ) {

        // console.log('Kick high');
        scene.add(cube2);
        // cube2.position.set(200, 200, 200);
        // cude2.position = new THREE.Vector3(200, 100, 100)
      },
      offKick: function ( mag ) {
        // console.log('no kick high');
          scene.remove(cube2);
          // cude2.position = new THREE.Vector3(100, 100, 100)
      }
    }),
    kickBreak = dancer.createKick({
      threshold: .25,
      onKick: function ( mag ) {

        // console.log('Kick brake');
        scene.add(cube3);
        // cube2.position.set(200, 200, 200);
        // cude2.position = new THREE.Vector3(200, 100, 100)
      },
      offKick: function ( mag ) {
        // console.log('no kick brake');
          scene.remove(cube3);
          // cude2.position = new THREE.Vector3(100, 100, 100)
      }
    })

  // Let's turn this kick on right away
  kickLow.on();
  kickHigh.on();

  dancer.onceAt( 1, function() {
    // Let's set up some things once at 10 seconds
    
  }).between( 52, 75, function() {
    kickLow.off();
    kickHigh.off();
    kickBreak.on();

    // After 10s, let's do something on every frame for the first minute
    // console.log(this.getFrequency( 400 ));
  }).after( 76, function() {
    kickBreak.off();

    kickLow.on();
    kickHigh.on();
    // After 60s, let's get this real and map a frequency to an object's y position
    // Note that the instance of dancer is bound to "this"
  }).onceAt( 800, function() {
    // After 120s, we'll turn the kick off as another object's y position is still being mapped from the previous "after" method
    kick.off();
  }).load( a ); // And finally, lets pass in our Audio element to load
    // object.y = this.getFrequency( 400 );

  // dancer.play();
  
  var cameraControls = new THREE.LeapCameraControls(camera);
//   Leap.loop(function(frame){
//   // maybe some modifications to your scene

  // cameraControls.update(frame) // rotating, zooming & panning
// renderer.render(scene, camera)
  
// }).use('boneHand', {
//       targetEl: document.body,
//       arm: true,
//       opacity: .2
//       // boneScale: 3.5,
//       // jointScale: 1.3
//     });
  // scene.getObjectByName('cube1')

Leap.loop(function(frame){
  // maybe some modifications to your scene

  // cameraControls.update(frame) // rotating, zooming & panning
// renderer.render(scene, camera)
}).use('riggedHand', {

        dotsMode: false,
        parent: scene,
        renderFn: function(){
          renderer.render(scene, camera);
        }});




// var scene    = Leap.loopController.plugins.boneHand.scene;
  // var camera2   = Leap.loopController.plugins.boneHand.camera;
  // var renderer2 = Leap.loopController.plugins.boneHand.renderer;

// var plane = new THREE.Mesh(
//     new THREE.PlaneGeometry(80,80),
//     new THREE.MeshPhongMaterial({wireframe: false})
//   );

// plane.scale.set(2,2,2);
//   plane.position.set(0,0,0);

  // camera2.lookAt( plane.position );

var axisHelper = new THREE.AxisHelper( 100 );
  scene.add( axisHelper );

  var controls = new THREE.OrbitControls( camera, renderer.domElement );

// Leap.loopController.on('handFound', function(hand) {
//     document.querySelector('canvas').style.display = 'block';
//   }).on('handLost', function(hand){
//     if (Leap.loopController.frame(0).hands.length === 0){
//       document.querySelector('canvas').style.display = 'none';
//     }
//   });


// }

// $('canvas').css('width', '100%');
// $('canvas').css('height', '100%');
// window.onload = init;






</script>
</html>