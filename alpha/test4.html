<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Document</title>
  <script type="text/javascript" src="js/jquery.min.js"></script>
  <script src="dance.js"></script>
  <script type="text/javascript" src="js/Detector.js"></script>
    <!-- // <script type="text/javascript" src="js/jquery.min.js"></script> -->
    <!-- // <script type="text/javascript" src="js/three.min.js"></script> -->
    <!-- // <script src="//cdnjs.cloudflare.com/ajax/libs/three.js/r69/three.js"></script> -->
    <script src="
https://cdnjs.cloudflare.com/ajax/libs/three.js/r73/three.js"></script>
    <script type="text/javascript" src="js/leap.min.js"></script>
    <!-- // <script type="text/javascript" src="js/leap.min.js"></script> -->
    
    <!-- // <script src="//js.leapmotion.com/leap-plugins-0.1.11.js"></script> -->
    <script type="text/javascript" src="js/LeapCameraControls.js"></script>
    <script type="text/javascript" src="js/leap-plugins-0.1.11.js"></script>

    <script type="text/javascript" src="js/LeapObjectControls.js"></script>
    <script src="js/OrbitControls.js"></script>
    <script src="js/leap.rigged-hand-0.1.7.js"></script>



  <!-- // <script src="//js.leapmotion.com/leap-0.6.4.js"></script> -->

   <!-- <script src="//js.leapmotion.com/leap-0.4.3.js"></script>
  // <script src="js/leap-plugins-0.1.11pre.js"></script>

  // <script src="js/leap-widgets-0.1.0.js"></script> -->

</head>
<body>
  
</body>

<script>


// window.onload = function() {
      var projector;
      var objects = [], objectsControls = [], cameraControls;
      var coords1, coords2, coords3;
      var lastControlsIndex = -1, controlsIndex = -1, index = -1;

      var renderer = new THREE.WebGLRenderer();
    renderer.setSize( 3000, 3000 );
    document.body.appendChild( renderer.domElement );

     var scene = new THREE.Scene();

       camera = new THREE.PerspectiveCamera(
        35,         // Field of view
        800 / 640,  // Aspect ratio
        0.1,        // Near
        10000       // Far
    );
    camera.position.set( -15, 10, 10 );
    camera.lookAt( scene.position );

//     var geometry = new THREE.Geometry();

    var geometryCude1 = new THREE.BoxGeometry( 1, 1, 1 );
    var materialCude1 = new THREE.MeshBasicMaterial( {color: 0x000000} );
    var cube1 = new THREE.Mesh( geometryCude1, materialCude1 );
    cube1.position.set(1, 1, 1);
    // scene.add(cube);

    var geometryCude2 = new THREE.BoxGeometry( 1, 1, 1 );
    var materialCude2 = new THREE.MeshBasicMaterial( {color: 0xFF0000 } );
    var cube2 = new THREE.Mesh( geometryCude2, materialCude2 );

    var geometryCude3 = new THREE.BoxGeometry( 1, 1, 1 );
    var materialCude3 = new THREE.MeshBasicMaterial( {color: 0x33FF00 } );
    var cube3 = new THREE.Mesh( geometryCude3, materialCude3 );
    cube1.position.set(1, 3, 1);

    

    // scene.add(cube2);

    var light = new THREE.PointLight( 0xFFFF00 );
    light.position.set( 10, 0, 10 );
    scene.add( light );

      renderer.setClearColor( 0xFFFFFF, 1);
      renderer.render( scene, camera );



  //   var dancer = new Dancer();
  //   var boost = 0;
  // // Using an audio object
  var a = new Audio();
  a.src = 'test.mp3';
  // dancer.load( a );
  // dancer.play()

  // temp = dancer.getWaveform()
  // dancer.createKick([0,10]);
  // function getData() {
  // for (var i = 0; i < temp.length; i++) {
  //               boost += temp[i];
  //               // console.log(array[i])
  //           }
  // console.log(boost)
  // }

    // To enable flash fallback, specify the paths for the flashSWF and flashJS
  // Dancer.setOptions({
  //   flashJS  : '../../lib/soundmanager2.js',
  //   flashSWF : '../../lib/soundmanager2.swf'
  // });

  var
    // audio  = document.getElementsByTagName('audio')[0],
    dancer = new Dancer(),
    kickLow = dancer.createKick({
      threshold: .1,
      onKick: function ( mag ) {

        console.log('Kick low');
        scene.add(cube1);
        

      },
      offKick: function ( mag ) {
        console.log('no kick low');
          scene.remove(cube1);
      }
    }),
    kickHigh = dancer.createKick({
      threshold: .5,
      onKick: function ( mag ) {

        console.log('Kick high');
        scene.add(cube2);
        // cube2.position.set(200, 200, 200);
        // cude2.position = new THREE.Vector3(200, 100, 100)
      },
      offKick: function ( mag ) {
        console.log('no kick high');
          scene.remove(cube2);
          // cude2.position = new THREE.Vector3(100, 100, 100)
      }
    }),
    kickBreak = dancer.createKick({
      threshold: .25,
      onKick: function ( mag ) {

        console.log('Kick brake');
        scene.add(cube3);
        // cube2.position.set(200, 200, 200);
        // cude2.position = new THREE.Vector3(200, 100, 100)
      },
      offKick: function ( mag ) {
        console.log('no kick brake');
          scene.remove(cube3);
          // cude2.position = new THREE.Vector3(100, 100, 100)
      }
    })

  // Let's turn this kick on right away
  kickLow.on();
  kickHigh.on();

  dancer.onceAt( 1, function() {
    // Let's set up some things once at 10 seconds
    
  }).between( 52, 75, function() {
    kickLow.off();
    kickHigh.off();
    kickBreak.on();

    // After 10s, let's do something on every frame for the first minute
    // console.log(this.getFrequency( 400 ));
  }).after( 76, function() {
    kickBreak.off();

    kickLow.on();
    kickHigh.on();
    // After 60s, let's get this real and map a frequency to an object's y position
    // Note that the instance of dancer is bound to "this"
  }).onceAt( 800, function() {
    // After 120s, we'll turn the kick off as another object's y position is still being mapped from the previous "after" method
    kick.off();
  }).load( a ); // And finally, lets pass in our Audio element to load
    // object.y = this.getFrequency( 400 );

  // dancer.play();

  var cameraControls = new THREE.LeapCameraControls(camera);
  Leap.loop(function(frame){
  // maybe some modifications to your scene
 

  cameraControls.update(frame), // rotating, zooming & panning
  renderer.render(scene, camera)
});










</script>
</html>